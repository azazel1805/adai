<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADAI</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ¦•</text></svg>">
    <!-- Firebase -->
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <!-- Font Awesome for icons (optional) -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <header>
        <div class="logo">
            ADA<span class="adai-i">I</span>
            <small><sub>Beta</sub></small>
        </div>
        <div class="user-info" style="display: none;"> <!-- Initially hidden -->
            <span id="user-email"></span>
            <button id="sign-out-button">Sign Out</button>
        </div>
    </header>

    <main id="main-content" style="display: none;"> <!-- Initially hidden until auth check -->
        <nav class="feature-nav">
            <button class="feature-button" data-feature="chatbot"><i class="fas fa-comments"></i> Ada</button>
            <button class="feature-button" data-feature="text-gen"><i class="fas fa-file-alt"></i> Text Generator</button>
            <button class="feature-button" data-feature="dictionary"><i class="fas fa-book"></i> Dictionary</button>
            <button class="feature-button" data-feature="corrector"><i class="fas fa-check-double"></i> Text Corrector</button>
            <button class="feature-button" data-feature="grammar"><i class="fas fa-spell-check"></i> Grammar Aid</button>
            <button class="feature-button" data-feature="essay"><i class="fas fa-pen-nib"></i> Essay Helper</button>
            <button class="feature-button" data-feature="paraphraser"><i class="fas fa-retweet"></i> Paraphraser</button>
             
             <button class="feature-button" data-feature="scenario"><i class="fas fa-theater-masks"></i> Scenario Practice</button>
        </nav>

        <div class="feature-display">
            <!-- Welcome Message -->
            <div id="welcome-message" class="feature-content active">
                 <h2>Welcome to ADAI!</h2>
                 <p>Select a feature above to get started with your AI English learning assistant.</p>
                 <p><em>Note: You must be signed in to use the ADAI features.</em></p>
                <p class="footer-credit">Created by HOTÂ®</p>
            </div>

            <!-- Chatbot -->
            <div id="chatbot" class="feature-content">
                <h2><i class="fas fa-comments"></i> Ada </h2>
                <div class="chat-container">
                    <div id="chat-box">
                        <div class="message bot">Hi! I'm Ada. How can I help you practice English today?</div>
                    </div>
                    <div class="chat-input-area">
                         
                         <input type="text" id="chat-input" placeholder="Type your message...">
                         
                         <div class="button-group">
                            <button id="send-chat-button" class="control-button"><i class="fas fa-paper-plane"></i></button>
                            <button id="speak-mode-button" class="control-button" title="Toggle Speak Mode"><i class="fas fa-microphone"></i></button>
                            <button id="toggle-tts-button" class="control-button" title="Toggle Bot Speech Output (On)">
                                <i class="fas fa-volume-up"></i>
                            </button>
                            <span id="speech-status" class="speech-status-indicator"></span>
                         </div>
                    </div>
                </div>
            </div>

            <!-- Text Generator -->
            <div id="text-gen" class="feature-content">
                 <h2><i class="fas fa-file-alt"></i> Text Generator</h2>
                 <div class="controls">
                     <label for="text-gen-level">Level:</label>
                     <select id="text-gen-level">
                        <option value="beginner">Beginner (A1-A2)</option>
                        <option value="encounter" selected>Encounter (A2-B1)</option>
                        <option value="investigation">Investigation (B1-B2)</option>
                        <option value="awakening">Awakening (B2)</option>
                        <option value="summit">Summit (C1)</option>
                        <option value="expert">Expert (C2)</option>
                    </select>
                     <label for="text-gen-topic">Topic:</label>
                     <input type="text" id="text-gen-topic" placeholder="e.g., A funny holiday story">
                     <button id="generate-text-button" class="control-button"><i class="fas fa-cogs"></i> Generate</button>
                 </div>
                 <div id="text-gen-output" class="output-box loading-indicator"></div>
            </div>

            <!-- Dictionary -->
            <div id="dictionary" class="feature-content">
                 <h2><i class="fas fa-book"></i> Dictionary</h2>
                  <div class="controls">
                     <label for="dict-word">Word:</label>
                     <input type="text" id="dict-word" placeholder="Enter an English word">
                     <button id="lookup-word-button" class="control-button"><i class="fas fa-search"></i> Look Up</button>
                  </div>
                  <div id="dict-output" class="output-box loading-indicator"></div>
            </div>

            <!-- Text Corrector -->
            <div id="corrector" class="feature-content">
                 <h2><i class="fas fa-check-double"></i> Text Corrector</h2>
                  <div class="controls">
                      <label for="corrector-input">Text to Correct:</label>
                      <textarea id="corrector-input" rows="6" placeholder="Paste or type your English text here..."></textarea>
                      <button id="correct-text-button" class="control-button"><i class="fas fa-magic"></i> Correct & Get Feedback</button>
                  </div>
                  <div id="corrector-output" class="output-box loading-indicator">
                      <h3>Corrected Text:</h3>
                      <div id="corrected-text-display"></div>
                      <h3>Feedback:</h3>
                      <div id="feedback-display"></div>
                  </div>
            </div>

            <!-- Grammar Aid -->
            <div id="grammar" class="feature-content">
                  <h2><i class="fas fa-spell-check"></i> Grammar Aid</h2>
                  <div class="controls">
                     <label for="grammar-topic">Grammar Topic:</label>
                     <input type="text" id="grammar-topic" placeholder="e.g., Present Perfect vs Past Simple">
                     <button id="explain-grammar-button" class="control-button"><i class="fas fa-question-circle"></i> Explain</button>
                  </div>
                  <div id="grammar-output" class="output-box loading-indicator"></div>
            </div>

            <!-- Essay Helper -->
            <div id="essay" class="feature-content">
                  <h2><i class="fas fa-pen-nib"></i> Essay Helper</h2>
                  <div class="controls">
                      <label for="essay-topic">Essay Topic:</label>
                      <input type="text" id="essay-topic" placeholder="e.g., The importance of renewable energy">
                      <label for="essay-type">Essay Type:</label>
                      <select id="essay-type">
                        <option value="argumentative" selected>Argumentative</option>
                        <option value="persuasive">Persuasive</option>
                        <option value="expository">Expository (Informative)</option>
                        <option value="narrative">Narrative (Story)</option>
                        <option value="descriptive">Descriptive</option>
                        <option value="compare and contrast">Compare and Contrast</option>
                        <option value="cause and effect">Cause and Effect</option>
                        <option value="critical analysis">Critical Analysis</option>
                        <option value="definition">Definition</option>
                        <option value="process analysis">Process Analysis (How-To)</option>
                        <option value="reflective">Reflective (Personal)</option>
                        <option value="literary analysis">Literary Analysis</option>
                        <option value="review">Review (Book/Movie/etc.)</option>
                        <option value="research proposal">Research Proposal (Outline)</option>
                    </select>
                      <button id="generate-outline-button" class="control-button"><i class="fas fa-list-alt"></i> Generate Outline</button>
                      <button id="generate-essay-button" class="control-button"><i class="fas fa-file-invoice"></i> Generate Full Essay</button>
                  </div>
                  <div id="essay-output" class="output-box loading-indicator"></div>
            </div>

             <!-- Paraphraser -->
             <div id="paraphraser" class="feature-content">
                 <h2><i class="fas fa-retweet"></i> Paraphraser</h2>
                 <div class="controls">
                      <label for="paraphrase-input">Text to Rephrase:</label>
                      <textarea id="paraphrase-input" rows="6" placeholder="Paste or type your text here..."></textarea>
                 </div>
                  <div class="controls">
                      <label for="paraphrase-style">Rephrasing Style:</label>
                      <select id="paraphrase-style">
                          <option value="simpler" selected>Simpler</option>
                          <option value="formal">Formal</option>
                          <option value="informal">Informal</option>
                          <option value="creative">Creative</option>
                          <option value="complex">Complex</option>
                      </select>
                      <button id="rephrase-button" class="control-button"><i class="fas fa-sync-alt"></i> Rephrase</button>
                  </div>
                 <div id="paraphrase-output" class="output-box loading-indicator"></div>
             </div>

             
              <div id="scenario" class="feature-content">
                 <h2><i class="fas fa-theater-masks"></i> Scenario Practice</h2>
                 <div id="scenario-setup">
                     <!-- ... scenario setup controls ... -->
                     <div class="controls">
                          <label for="scenario-description">Describe the Scenario:</label>
                          <textarea id="scenario-description" rows="4" placeholder="Example: I am at a job interview for a software engineer position. Ada is the interviewer."></textarea>
                     </div>
                      <div class="controls">
                           <button id="start-scenario-button" class="control-button"><i class="fas fa-play"></i> Start Scenario</button>
                      </div>
                      <p><em>Describe the situation and clearly state the role Ada should play...</em></p>
                 </div>
                 <div id="scenario-interaction" style="display: none;">
                     <h3 id="scenario-title-display">Scenario: </h3>
                     <div class="chat-container scenario-chat-container">
                         <div id="scenario-chat-box"></div>
                         {/* --- Modified Input Area --- */}
                         <div class="chat-input-area scenario-input-area">
                              {/* CHANGE THIS BACK TO TEXTAREA */}
                              <textarea id="scenario-chat-input" placeholder="Type your response..." rows="2"></textarea>
                              <div class="button-group">
                                 <button id="send-scenario-chat-button" class="control-button"><i class="fas fa-paper-plane"></i> Send</button>
                                 {/* Only Send button needed here, other controls are global */}
                             </div>
                         </div>
                         {/* --- End Modified Input Area --- */}
                     </div>
                     <button id="reset-scenario-button" class="control-button secondary-button" style="margin-top: 15px;"><i class="fas fa-undo"></i> New Scenario</button>
                 </div>
             </div>
             <!-- END NEW SCENARIO SECTION -->
            

        </div> <!-- End feature-display -->
    </main>

    <div id="loading-overlay" style="display: none;">
        <div class="spinner"></div>
        <p>Processing...</p>
    </div>

    <footer class="page-footer">
        <p class="footer-credit">Created by HOTÂ® Powered by GEMINI</p>
    </footer>

    <!-- Firebase Config -->
    <script src="{{ url_for('static', filename='js/firebase-config.js') }}"></script>
    <!-- Custom JS (includes auth logic) -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>

</body>
</html>
